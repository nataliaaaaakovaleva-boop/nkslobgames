<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–π–Ω–∞ –º—è–≥–∫–æ–≥–æ –∑–Ω–∞–∫–∞ | –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ 2 –∫–ª–∞—Å—Å</title>
    <style>
        /* --- –°—Ç–∏–ª–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è (–î–∏–∑–∞–π–Ω –¥–ª—è –¥–µ—Ç–µ–π) --- */
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background-color: #e0f7fa;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: #333;
        }

        h1 {
            color: #0277bd;
            text-align: center;
            text-shadow: 1px 1px 0px #fff;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            padding: 20px;
            max-width: 600px;
            width: 100%;
            text-align: center;
            border: 3px solid #4fc3f7;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 1.2em;
            font-weight: bold;
            color: #0288d1;
        }

        .progress-bar {
            width: 100%;
            background-color: #ddd;
            height: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #4caf50;
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s;
        }

        .game-area {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .word-display {
            font-size: 3em;
            font-weight: bold;
            margin: 20px 0;
            letter-spacing: 2px;
            color: #37474f;
        }

        .hint-img {
            font-size: 4em; /* –≠–º–æ–¥–∑–∏ –≤–º–µ—Å—Ç–æ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã */
            margin-bottom: 10px;
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        button {
            padding: 15px 30px;
            font-size: 1.2em;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
            font-family: inherit;
            font-weight: bold;
        }

        button:active {
            transform: scale(0.95);
        }

        .btn-primary {
            background-color: #4fc3f7;
            color: white;
            box-shadow: 0 4px 0 #0288d1;
        }

        .btn-success {
            background-color: #81c784;
            color: white;
            box-shadow: 0 4px 0 #388e3c;
        }

        .btn-danger {
            background-color: #e57373;
            color: white;
            box-shadow: 0 4px 0 #c62828;
        }

        .btn-choice {
            background-color: #fff;
            border: 2px solid #4fc3f7;
            color: #0277bd;
            font-size: 1.5em;
            padding: 10px 20px;
        }

        .message {
            margin-top: 20px;
            font-size: 1.5em;
            font-weight: bold;
            min-height: 2em;
        }

        .correct { color: #2e7d32; }
        .wrong { color: #c62828; }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        .shake {
            animation: shake 0.5s;
        }

        .hidden {
            display: none;
        }

    </style>
</head>
<body>

    <h1>üéì –ò–≥—Ä–∞ ¬´–¢–∞–π–Ω–∞ –º—è–≥–∫–æ–≥–æ –∑–Ω–∞–∫–∞¬ª</h1>
    
    <div class="container">
        <div class="header-info">
            <span>‚≠ê –û—á–∫–∏: <span id="score">0</span></span>
            <span>üèÜ –£—Ä–æ–≤–µ–Ω—å: <span id="level-display">1</span></span>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="game-area" id="game-content">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
        </div>

        <div class="message" id="message-box"></div>
    </div>

    <script>
        // --- –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã (–ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å) ---

        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π
        const levels = [
            // –£—Ä–æ–≤–µ–Ω—å 1: "–ú–∞–≥–∏—á–µ—Å–∫–∏–π –º–æ—Å—Ç–∏–∫" (–í—Å—Ç–∞–≤–∏—Ç—å —å –∏–ª–∏ –Ω–µ—Ç)
            {
                type: 'insert',
                questions: [
                    { text: "–ü–û–õ...–Æ", hint: "üöø", answer: true, tip: "–ë—É–¥—É –ø–æ–ª–∏–≤–∞—Ç—å —Ü–≤–µ—Ç—ã" },
                    { text: "–°–¢–£–õ...–Ø", hint: "ü™ë", answer: true, tip: "–ú–Ω–æ–≥–æ —Å—Ç—É–ª—å–µ–≤" },
                    { text: "–®–ê–ü...–ö–ê", hint: "üß¢", answer: false, tip: "–ì–æ–ª–æ–≤–Ω–æ–π —É–±–æ—Ä" },
                    { text: "–õ–ò–°...–Ø", hint: "ü¶ä", answer: true, tip: "–ù–æ—Ä–∞ –ª–∏—Å—ã" },
                    { text: "–û–ë–ï–ó...–Ø–ù–ê", hint: "üêí", answer: true, tip: "–ñ–∏–≤–æ—Ç–Ω–æ–µ –≤ –¥–∂—É–Ω–≥–ª—è—Ö" },
                ]
            },
            // –£—Ä–æ–≤–µ–Ω—å 2: "–õ–µ—Å–Ω—ã–µ –∑–∞–≥–∞–¥–∫–∏" (–í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞)
            {
                type: 'choice',
                questions: [
                    { hint: "üêøÔ∏è", options: ["–ë–ï–õ–¨–ß–ê–¢–ê", "–ë–ï–õ–ß–ê–¢–ê"], correct: "–ë–ï–õ–¨–ß–ê–¢–ê" },
                    { hint: "ü¶Ö", options: ["–û–†–õ–Ø–¢–ê", "–û–†–¨–Ø–¢–ê"], correct: "–û–†–õ–Ø–¢–ê" },
                    { hint: "üå≤", options: ["–î–ï–†–ï–í–¨–Ø", "–î–ï–†–ï–í–Ø"], correct: "–î–ï–†–ï–í–¨–Ø" },
                    { hint: "ü™∂", options: ["–ü–ï–†–¨–Ø", "–ü–ï–†–Ø"], correct: "–ü–ï–†–¨–Ø" },
                ]
            },
            // –£—Ä–æ–≤–µ–Ω—å 3: "–ë–∏—Ç–≤–∞ —Å –û—à–∏–±–∫–æ–µ–¥–æ–º" (–í–µ—Ä–Ω–æ –ª–∏ –Ω–∞–ø–∏—Å–∞–Ω–æ?)
            {
                type: 'truth',
                questions: [
                    { word: "–í–¨–Æ–ì–ê", isCorrect: true },
                    { word: "–ü–û–î–™–ï–ó–î", isCorrect: false, comment: "–≠—Ç–æ —Ç–≤–µ—Ä–¥—ã–π –∑–Ω–∞–∫!" },
                    { word: "–ö–û–ù–¨–ö–ò", isCorrect: false, comment: "–ó–¥–µ—Å—å —å - –º—è–≥–∫–∏–π, –Ω–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–π!" },
                    { word: "–†–£–ß–¨–ò", isCorrect: true },
                    { word: "–°–ê–õ–ê–¢–´", isCorrect: true },
                ]
            }
        ];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let currentLevelIndex = 0;
        let currentQuestionIndex = 0;
        let score = 0;
        let totalQuestions = levels.reduce((acc, lvl) => acc + lvl.questions.length, 0);
        let answeredCount = 0;

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const gameContent = document.getElementById('game-content');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level-display');
        const messageBox = document.getElementById('message-box');
        const progressBar = document.getElementById('progress');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function startGame() {
            currentLevelIndex = 0;
            currentQuestionIndex = 0;
            score = 0;
            answeredCount = 0;
            scoreDisplay.innerText = score;
            progressBar.style.width = '0%';
            renderIntro();
        }

        // –≠–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
        function renderIntro() {
            gameContent.innerHTML = `
                <div class="hint-img">üßô‚Äç‚ôÇÔ∏è</div>
                <p>–ü—Ä–∏–≤–µ—Ç, –¥—Ä—É–≥! –Ø ‚Äî –ú—è–≥–∫–∏–π –ó–Ω–∞–∫. –ü–æ–º–æ–≥–∏ –º–Ω–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å–æ–≥–ª–∞—Å–Ω—ã–µ –∏ –≥–ª–∞—Å–Ω—ã–µ –≤ —Å–ª–æ–≤–∞—Ö!</p>
                <p>–ü–æ–º–Ω–∏: —è —Å—Ç–∞–≤–ª—é—Å—å –ø–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ï, –Å, –Æ, –Ø, –ò.</p>
                <button class="btn-primary" onclick="nextLevel()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É ‚ñ∂</button>
            `;
            levelDisplay.innerText = "–í—Å—Ç—É–ø–ª–µ–Ω–∏–µ";
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —É—Ä–æ–≤–Ω—é
        function nextLevel() {
            currentQuestionIndex = 0;
            if (currentLevelIndex < levels.length) {
                levelDisplay.innerText = currentLevelIndex + 1;
                renderQuestion();
            } else {
                renderWinScreen();
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
        function renderQuestion() {
            messageBox.innerText = "";
            const level = levels[currentLevelIndex];
            
            if (currentQuestionIndex >= level.questions.length) {
                currentLevelIndex++;
                // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞
                gameContent.innerHTML = `
                    <div class="hint-img">üéâ</div>
                    <h2 class="correct">–£—Ä–æ–≤–µ–Ω—å –ø—Ä–æ–π–¥–µ–Ω!</h2>
                    <button class="btn-success" onclick="nextLevel()">–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å ‚û°</button>
                `;
                return;
            }

            const q = level.questions[currentQuestionIndex];

            if (level.type === 'insert') {
                renderInsertQuestion(q);
            } else if (level.type === 'choice') {
                renderChoiceQuestion(q);
            } else if (level.type === 'truth') {
                renderTruthQuestion(q);
            }
        }

        // --- –¢–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π ---

        // 1. –í—Å—Ç–∞–≤–∏—Ç—å –¨
        function renderInsertQuestion(q) {
            gameContent.innerHTML = `
                <div class="hint-img">${q.hint}</div>
                <div class="word-display">${q.text}</div>
                <p style="color: #666; font-size: 0.9em">${q.tip}</p>
                <div class="btn-group">
                    <button class="btn-choice" onclick="checkInsert(true, ${q.answer})">–ù–∞–ø–∏—à—É –¨</button>
                    <button class="btn-choice" onclick="checkInsert(false, ${q.answer})">–ë–µ–∑ –¨</button>
                </div>
            `;
        }

        function checkInsert(userChoice, correctChoice) {
            if (userChoice === correctChoice) {
                handleCorrect();
            } else {
                handleWrong();
            }
        }

        // 2. –í—ã–±–æ—Ä —Å–ª–æ–≤–∞
        function renderChoiceQuestion(q) {
            let buttons = q.options.map(opt => 
                `<button class="btn-choice" onclick="checkChoice('${opt}', '${q.correct}')">${opt}</button>`
            ).join('');

            gameContent.innerHTML = `
                <div class="hint-img">${q.hint}</div>
                <p>–í—ã–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ:</p>
                <div class="btn-group">${buttons}</div>
            `;
        }

        function checkChoice(selected, correct) {
            if (selected === correct) {
                handleCorrect();
            } else {
                handleWrong();
            }
        }

        // 3. –í–µ—Ä–Ω–æ/–ù–µ–≤–µ—Ä–Ω–æ
        function renderTruthQuestion(q) {
            gameContent.innerHTML = `
                <div class="hint-img">ü§î</div>
                <p>–í–µ—Ä–Ω–æ –ª–∏ –Ω–∞–ø–∏—Å–∞–Ω–æ —Å–ª–æ–≤–æ?</p>
                <div class="word-display">${q.word}</div>
                <div class="btn-group">
                    <button class="btn-success" onclick="checkTruth(true, ${q.isCorrect})">–í–µ—Ä–Ω–æ ‚úÖ</button>
                    <button class="btn-danger" onclick="checkTruth(false, ${q.isCorrect})">–û—à–∏–±–∫–∞ ‚ùå</button>
                </div>
            `;
        }

        function checkTruth(userSaidCorrect, isActuallyCorrect) {
            if (userSaidCorrect === isActuallyCorrect) {
                handleCorrect();
            } else {
                // –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π —Ñ–∏–¥–±–µ–∫ –¥–ª—è —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ —Ç–≤–µ—Ä–¥—ã–π –∑–Ω–∞–∫)
                const q = levels[currentLevelIndex].questions[currentQuestionIndex];
                let extraMsg = "";
                if (q.comment) extraMsg = `<br><small style="color: #555">(${q.comment})</small>`;
                handleWrong(extraMsg);
            }
        }

        // --- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ---

        function handleCorrect() {
            score += 10;
            answeredCount++;
            scoreDisplay.innerText = score;
            updateProgress();
            
            gameContent.querySelector('.word-display')?.classList.add('correct');
            messageBox.innerHTML = "<span class='correct'>–ú–æ–ª–æ–¥–µ—Ü! –ü—Ä–∞–≤–∏–ª—å–Ω–æ! ‚≠ê</span>";
            
            setTimeout(() => {
                currentQuestionIndex++;
                renderQuestion();
            }, 1000);
        }

        function handleWrong(extraMsg = "") {
            messageBox.innerHTML = `<span class='wrong'>–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑! ‚ùå ${extraMsg}</span>`;
            gameContent.querySelector('.word-display')?.classList.add('shake');
            
            // –ü—Ä–æ—Å—Ç–∞—è –≤–∏–±—Ä–∞—Ü–∏—è –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–µ/—Ç–µ–ª–µ—Ñ–æ–Ω–µ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
            if (navigator.vibrate) navigator.vibrate(200);

            // –®—Ç—Ä–∞—Ñ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∑–¥–µ—Å—å, –Ω–æ –¥–ª—è 2 –∫–ª–∞—Å—Å–∞ –º—ã –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á—É –Ω–∞ —ç–∫—Ä–∞–Ω–µ
            // setTimeout(() => renderQuestion(), 1500); // –ê–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥ –ø—Ä–∏ –æ—à–∏–±–∫–µ (—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è)
        }

        function updateProgress() {
            let percent = (answeredCount / totalQuestions) * 100;
            progressBar.style.width = percent + '%';
        }

        function renderWinScreen() {
            levelDisplay.innerText = "–§–∏–Ω–∏—à";
            gameContent.innerHTML = `
                <div class="hint-img">üèÜ</div>
                <h2 class='correct'>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
                <p>–¢—ã –æ—Ç–ª–∏—á–Ω—ã–π –∑–Ω–∞—Ç–æ–∫ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞!</p>
                <h3>–¢–≤–æ–π —Å—á–µ—Ç: ${score}</h3>
                <button class="btn-primary" onclick="startGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞ üîÑ</button>
            `;
        }

        // –ó–∞–ø—É—Å–∫
        startGame();

    </script>
</body>
</html>